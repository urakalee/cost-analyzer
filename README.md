# Cost Analyzer - æˆæœ¬åˆ†æå·¥å…·

ä¸€ä¸ªçº¯å‰ç«¯çš„è´¦å•åˆ†æå·¥å…·ï¼Œç”¨äºåˆ†æå¾®ä¿¡/æ”¯ä»˜å®/äº¬ä¸œè´¦å•ï¼Œç­›é€‰å¤§é¢æ”¯å‡ºå¹¶å¯¼å‡ºåˆ†æç»“æœã€‚

## âœ¨ ç‰¹æ€§

- ğŸ”’ **éšç§å®‰å…¨**: æ•°æ®å®Œå…¨åœ¨æµè§ˆå™¨æœ¬åœ°å¤„ç†ï¼Œä¸ä¸Šä¼ æœåŠ¡å™¨
- ğŸ“Š **å¤šå¹³å°æ”¯æŒ**: æ”¯æŒå¾®ä¿¡ã€æ”¯ä»˜å®ã€äº¬ä¸œä¸‰å¤§å¹³å°è´¦å•
- ğŸ¯ **æ™ºèƒ½ç­›é€‰**: å¯è°ƒé‡‘é¢é˜ˆå€¼ï¼Œå¿«é€Ÿå®šä½å¤§é¢æ”¯å‡º
- ğŸ·ï¸ **åˆ†ç±»ç®¡ç†**: æŒ‰åˆ†ç±»ç­›é€‰äº¤æ˜“è®°å½•
- ğŸ“ **å¤‡æ³¨åŠŸèƒ½**: ä¸ºäº¤æ˜“æ·»åŠ è‡ªå®šä¹‰å¤‡æ³¨
- ğŸ“¤ **çµæ´»å¯¼å‡º**: æ”¯æŒå¯¼å‡ºä¸º Excel æˆ– CSV æ ¼å¼
- ğŸ¨ **ç°ä»£ç•Œé¢**: åŸºäº Tailwind CSS çš„æ¸…æ–°ç•Œé¢è®¾è®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### è¿è¡Œæµ‹è¯•

```bash
npm run test
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. ä¸Šä¼ è´¦å•æ–‡ä»¶

- æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
- æ”¯æŒ `.csv` å’Œ `.xlsx` æ ¼å¼
- è‡ªåŠ¨è¯†åˆ«å¹³å°ï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/äº¬ä¸œï¼‰

### 2. è®¾ç½®ç­›é€‰æ¡ä»¶

- **é‡‘é¢é˜ˆå€¼**: é»˜è®¤ 500 å…ƒï¼Œå¯è‡ªå®šä¹‰
- **åˆ†ç±»ç­›é€‰**: é€‰æ‹©ç‰¹å®šåˆ†ç±»æŸ¥çœ‹

### 3. æŸ¥çœ‹åˆ†æç»“æœ

- æŸ¥çœ‹ç»Ÿè®¡å¡ç‰‡ï¼šäº¤æ˜“ç¬”æ•°ã€æ€»é‡‘é¢ã€å¹³å‡é‡‘é¢ã€æœ€å¤§å•ç¬”
- æµè§ˆè¯¦ç»†äº¤æ˜“è¡¨æ ¼ï¼Œæ”¯æŒæ’åº
- ç‚¹å‡»å¤‡æ³¨åˆ—æ·»åŠ è‡ªå®šä¹‰å¤‡æ³¨

### 4. å¯¼å‡ºæ•°æ®

- ç‚¹å‡»"å¯¼å‡º Excel"æˆ–"å¯¼å‡º CSV"
- ä»…å¯¼å‡ºç¬¦åˆç­›é€‰æ¡ä»¶çš„å¤§é¢äº¤æ˜“

## ğŸ“‹ è´¦å•æ–‡ä»¶æ ¼å¼

### æ”¯ä»˜å®è´¦å•

- **æ ¼å¼**: CSV (GBK ç¼–ç )
- **å¯¼å‡ºè·¯å¾„**: æ”¯ä»˜å® App â†’ æˆ‘çš„ â†’ è´¦å• â†’ å³ä¸Šè§’è®¾ç½® â†’ ä¸‹è½½è´¦å•
- **æ³¨æ„**: é€‰æ‹©"ä»…æ”¯å‡º"ç±»å‹

### å¾®ä¿¡è´¦å•

- **æ ¼å¼**: Excel (.xlsx)
- **å¯¼å‡ºè·¯å¾„**: å¾®ä¿¡ â†’ æˆ‘ â†’ æœåŠ¡ â†’ é’±åŒ… â†’ è´¦å• â†’ å¸¸è§é—®é¢˜ â†’ ä¸‹è½½è´¦å•
- **æ³¨æ„**: é€‰æ‹©"å…¨éƒ¨"æˆ–"æ”¯å‡º"ç±»å‹

### äº¬ä¸œè´¦å•

- **æ ¼å¼**: CSV (UTF-8 ç¼–ç )
- **å¯¼å‡ºè·¯å¾„**: äº¬ä¸œ App â†’ æˆ‘çš„ â†’ æˆ‘çš„é’±åŒ… â†’ äº¤æ˜“æ˜ç»† â†’ å¯¼å‡º
- **æ³¨æ„**: é€‰æ‹©"æ”¯å‡º"ç±»å‹

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: Tailwind CSS
- **UI ç»„ä»¶**: shadcn/ui
- **è¡¨æ ¼**: @tanstack/react-table
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ–‡ä»¶è§£æ**: PapaParse (CSV), SheetJS (Excel)
- **æµ‹è¯•**: Vitest

## ğŸ“ é¡¹ç›®ç»“æ„

```
cost-analyzer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/           # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FileUploader.tsx
â”‚   â”‚   â”œâ”€â”€ FilterBar.tsx
â”‚   â”‚   â”œâ”€â”€ StatisticsCards.tsx
â”‚   â”‚   â”œâ”€â”€ TransactionTable.tsx
â”‚   â”‚   â””â”€â”€ ExportButtons.tsx
â”‚   â”œâ”€â”€ parsers/          # æ–‡ä»¶è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ alipayParser.ts
â”‚   â”‚   â”œâ”€â”€ wechatParser.ts
â”‚   â”‚   â”œâ”€â”€ jdParser.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ store/            # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ useTransactionStore.ts
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ transaction.ts
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”‚   â””â”€â”€ export.ts
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ sample-data/          # æµ‹è¯•æ•°æ®
â”œâ”€â”€ PRD.md               # äº§å“éœ€æ±‚æ–‡æ¡£
â””â”€â”€ README.md
```

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# ç›‘å¬æ¨¡å¼
npm run test -- --watch

# æŸ¥çœ‹è¦†ç›–ç‡
npm run test -- --coverage
```

æµ‹è¯•è¦†ç›–ï¼š
- å·¥å…·å‡½æ•°æµ‹è¯• (formatters, export)
- çŠ¶æ€ç®¡ç†æµ‹è¯• (useTransactionStore)
- ç»„ä»¶é›†æˆæµ‹è¯•

## ğŸ”’ éšç§è¯´æ˜

- âœ… æ‰€æœ‰æ•°æ®åœ¨æµè§ˆå™¨æœ¬åœ°å¤„ç†
- âœ… ä¸å‘é€ä»»ä½•æ•°æ®åˆ°æœåŠ¡å™¨
- âœ… ä¸ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹è¿½è¸ª
- âœ… ä¸ä¿å­˜å†å²è®°å½•ï¼ˆåˆ·æ–°é¡µé¢æ•°æ®æ¸…ç©ºï¼‰

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ

### æ”¯ä»˜å®GBKç¼–ç å¤„ç†

```typescript
// ä½¿ç”¨æµè§ˆå™¨åŸç”ŸAPIå¤„ç†GBKç¼–ç 
const decoder = new TextDecoder('gb18030')
let text = decoder.decode(bytes)

// å…³é”®ï¼šæ ‡å‡†åŒ–æ¢è¡Œç¬¦ï¼ˆGBKæ–‡ä»¶ä½¿ç”¨\r\nï¼ŒPapaParseéœ€è¦\nï¼‰
text = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n')
```

### ReactçŠ¶æ€ç®¡ç†ä¼˜åŒ–

```typescript
// é¢„è®¡ç®—æ´¾ç”ŸçŠ¶æ€ï¼Œé¿å…æ¸²æŸ“æœŸé—´æ›´æ–°ï¼ˆéµå¾ªReactè§„åˆ™ï¼‰
interface Store {
  transactions: Transaction[]
  filteredTransactions: Transaction[]  // é¢„è®¡ç®—å±æ€§ï¼Œéå‡½æ•°

  setThreshold: (threshold) => {
    const filtered = computeFiltered(...)
    set({ threshold, filteredTransactions: filtered })  // ä»…åœ¨actionä¸­æ›´æ–°
  }
}
```

### è¾“å…¥é˜²æŠ–ä¼˜åŒ–

```typescript
// 500msé˜²æŠ–ï¼Œé¿å…é¢‘ç¹é‡æ–°è®¡ç®—å’Œæ¸²æŸ“
const [localThreshold, setLocalThreshold] = useState(threshold)

useEffect(() => {
  const timer = setTimeout(() => setThreshold(localThreshold), 500)
  return () => clearTimeout(timer)
}, [localThreshold])
```

## ğŸ“‹ å·¥ç¨‹åŸåˆ™

æœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ªè½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µï¼š

- **KISSåŸåˆ™** - çº¯å‰ç«¯æ¶æ„ï¼Œæ— ä¸å¿…è¦çš„å¤æ‚åº¦
- **DRYåŸåˆ™** - ç»Ÿä¸€ç±»å‹å®šä¹‰ï¼Œå…±ç”¨å·¥å…·å‡½æ•°ï¼Œé¢„è®¡ç®—é¿å…é‡å¤
- **YAGNIåŸåˆ™** - ä»…å®ç°æ˜ç¡®éœ€æ±‚ï¼Œæ‹’ç»è¿‡åº¦è®¾è®¡
- **SOLIDåŸåˆ™** - å•ä¸€èŒè´£ã€å¼€é—­æ‰©å±•ã€ä¾èµ–å€’ç½®

## ğŸ§ª æµ‹è¯•è¦†ç›–

```
âœ“ src/utils/__tests__/export.test.ts (2 tests)
âœ“ src/store/__tests__/useTransactionStore.test.ts (8 tests)
âœ“ src/parsers/__tests__/formatters.test.ts (10 tests)

Test Files  3 passed (3)
Tests       20 passed (20)
```

## ğŸ› å·²è§£å†³çš„æŠ€æœ¯æŒ‘æˆ˜

è¯¦è§ [PRD.md - æŠ€æœ¯é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](./PRD.md#ä¹æŠ€æœ¯é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)ï¼š

1. âœ… æ”¯ä»˜å®CSVæ¢è¡Œç¬¦è§£æé—®é¢˜
2. âœ… Reactæ¸²æŸ“æœŸé—´setStateè­¦å‘Š
3. âœ… é˜ˆå€¼è¾“å…¥å¡é¡¿ä¼˜åŒ–
4. âœ… æ–‡ä»¶ä¸Šä¼ ååˆ—è¡¨åˆ·æ–°é—®é¢˜

## ğŸ“ æ–‡æ¡£

- [PRD.md](./PRD.md) - å®Œæ•´çš„äº§å“éœ€æ±‚æ–‡æ¡£ï¼ŒåŒ…å«æŠ€æœ¯æ–¹æ¡ˆå’Œé—®é¢˜è§£å†³è®°å½•
- [TypeScriptç±»å‹å®šä¹‰](./src/types/transaction.ts) - æ•°æ®ç»“æ„å®šä¹‰

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å¼€å‘çŠ¶æ€ï¼š** âœ… ç”Ÿäº§å°±ç»ª
**æµ‹è¯•çŠ¶æ€ï¼š** âœ… 20/20 é€šè¿‡
**æœ€åæ›´æ–°ï¼š** 2026-02-05
